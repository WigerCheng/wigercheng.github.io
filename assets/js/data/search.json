[ { "title": "AndroidåŠ¨ç”»ä¹‹æ·¡å…¥æ·¡å‡ºåŠ¨ç”»", "url": "/posts/Android_Fade_Animation/", "categories": "Android, Animation", "tags": "Animation", "date": "2022-04-25 00:00:00 +0800", "snippet": "æ·¡å…¥æ·¡å‡ºåŠ¨ç”»åœ¨å®‰å“å¼€å‘ä¸­ï¼Œå¸¸ç”¨æ·¡å…¥æ·¡å‡ºçš„åŠ¨ç”»æ¥æ˜¾ç¤ºåŠ è½½ä¸­çš„æ•ˆæœã€‚æ¯”å¦‚åœ¨åŠ è½½æ–°é—»åˆ—è¡¨æ—¶ï¼Œå…ˆæ˜¾ç¤ºéª¨æ¶å±åŠ¨ç”»ï¼Œå½“è¯·æ±‚æˆåŠŸåï¼Œéª¨æ¶å±ä»¥æ·¡å‡ºçš„å½¢å¼æ¶ˆå¤±ï¼Œæ–°é—»åˆ—è¡¨é¡¹ä»¥æ·¡å…¥çš„å½¢å¼å‡ºç°ã€‚æˆ–è€…æ˜¯åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¾ç¤ºä¸€ä¸ªç©ºçš„å›¾ç‰‡æˆ–å ä½å›¾ç‰‡ï¼Œå½“å›¾ç‰‡åŠ è½½æˆåŠŸï¼Œå ä½å›¾ç‰‡ä»¥æ·¡å‡ºçš„å½¢å¼æ¶ˆå¤±ï¼ŒåŠ è½½çš„å›¾ç‰‡ä»¥æ·¡å…¥çš„å½¢å¼æ˜¾ç¤ºã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚ä»¥Android Logoä½œä¸ºå ä½å›¾ï¼Œå‘˜å·¥å¤´åƒä¸ºè¯·æ±‚çš„å›¾ç‰‡ã€‚å®ç°æ·¡å…¥æ·¡å‡ºåŠ¨ç”» å‡†å¤‡ä¸¤ä¸ªImageViewä¸€ä¸ªImageViewæ˜¾ç¤ºå ä½å›¾ï¼Œä¸€ä¸ªæ˜¾ç¤ºImageViewè¯·æ±‚çš„å›¾ç‰‡ã€‚è¯·æ±‚å›¾ç‰‡çš„ImageViewçš„visibilityé»˜è®¤æ˜¯Goneã€‚&amp;lt;FrameLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;0dp&quot; android:layout_weight=&quot;1&quot;&amp;gt; &amp;lt;ImageView android:id=&quot;@+id/v_content&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:src=&quot;@drawable/profile_picture&quot; android:visibility=&quot;gone&quot; /&amp;gt; &amp;lt;ImageView android:id=&quot;@+id/v_loading&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:src=&quot;@mipmap/ic_launcher&quot; /&amp;gt;&amp;lt;/FrameLayout&amp;gt; æ‰§è¡ŒåŠ¨ç”»æŠŠåŠ è½½å›¾ç‰‡çš„ImageViewçš„visibilityè®¾ä¸ºVISIBLEï¼Œå¹¶æ‰§è¡Œä»é€æ˜åˆ°ä¸é€æ˜çš„åŠ¨ç”»ï¼Œå®ç°æ·¡å…¥æ•ˆæœã€‚å ä½å›¾çš„ImageViewæ‰§è¡Œä¸é€æ˜åˆ°é€æ˜çš„åŠ¨ç”»ï¼Œå®ç°æ·¡å‡ºæ•ˆæœï¼Œç›‘å¬åŠ¨ç”»å›è°ƒï¼Œå½“åŠ¨ç”»æ‰§è¡Œç»“æŸåï¼Œå°†å ä½å›¾çš„visibilityè®¾ä¸ºGONEã€‚//åŠ¨ç”»æ—¶é•¿val shortAnimationDuration = resources.getInteger(android.R.integer.config_longAnimTime).toLong()private fun crossFade() { content.run { //æ·¡å…¥çš„Viewä»åˆå§‹çŠ¶æ€çš„GONEåˆ‡æ¢æˆVisibleï¼Œç„¶åé€šè¿‡é€æ˜åº¦0éšè—ã€‚ visibility = View.VISIBLE alpha = 0F //æ‰§è¡ŒåŠ¨ç”» animate() .alpha(1F) .setDuration(shortAnimationDuration) } loading.animate() .alpha(0F) .setDuration(shortAnimationDuration) .setListener(object : AnimatorListenerAdapter() { override fun onAnimationEnd(animation: Animator?) { super.onAnimationEnd(animation) loading.visibility = View.GONE } })}ä»£ç å‚è€ƒä»£ç " }, { "title": "AndroidåŠ¨ç”»ä¹‹åœ†å½¢æ­éœ²åŠ¨ç”»", "url": "/posts/Android_Circle_Animation/", "categories": "Android, Animation", "tags": "Animation", "date": "2022-04-24 00:00:00 +0800", "snippet": "åœ†å½¢æ­éœ²åŠ¨ç”»åœ†å½¢æ­éœ²åŠ¨ç”»ï¼Œå¯ä»¥è®©ä¸€ä¸ªViewè£å‰ªæˆä¸€ä¸ªåœ†å½¢ï¼Œå¹¶ä»¥æŒ‡å®šçš„åœ†å¿ƒåšåŠå¾„å˜åŒ–åŠ¨ç”»ã€‚å½“æ‚¨æ˜¾ç¤ºæˆ–éšè—ä¸€ç»„ç•Œé¢å…ƒç´ æ—¶ï¼Œå¯ç»™ç”¨æˆ·æä¾›è§†è§‰è¿ç»­æ€§ã€‚ä½¿ç”¨åœ†å½¢æ­éœ²åŠ¨ç”»é€šè¿‡è°ƒç”¨ViewAnimationUtils.createCircularReveal()è¿”å›ä¸€ä¸ªAnimatorå®ä¾‹ï¼Œè°ƒç”¨animator.start()æ˜¾ç¤ºåŠ¨ç”»ã€‚createCircularReveal() åŠ¨ç”»é‡‡ç”¨äº”ä¸ªå‚æ•°ã€‚ View -&amp;gt; å³è¦æ‰§è¡ŒåŠ¨ç”»çš„Viewã€‚ centerX -&amp;gt; æŒ‡å®šåœ†å¿ƒçš„xç‚¹åæ ‡ã€‚ centerY -&amp;gt; æŒ‡å®šåœ†å¿ƒçš„yç‚¹åæ ‡ã€‚ startRadius -&amp;gt; åŠ¨ç”»å¼€å§‹å‰å‰ªè£åœ†å½¢çš„åŠå¾„ ã€‚ endRadius -&amp;gt; åŠ¨ç”»ç»“æŸæ—¶çš„åœ†å½¢åŠå¾„ã€‚ä»£ç å®ç°å‚è€ƒfindViewById&amp;lt;Button&amp;gt;(R.id.btn_circle_scale_down).setOnClickListener { val image = findViewById&amp;lt;ImageView&amp;gt;(R.id.img_circle) val width = image.width val height = image.height image.visibility = View.VISIBLE ViewAnimationUtils.createCircularReveal( image, width / 2, height / 2, 0F, width.toFloat() ).apply { duration = 2000L }.also { it.start() } }" }, { "title": "Androidå¼€å‘â€”â€”é¢œè‰²", "url": "/posts/Android_Color/", "categories": "Android, Develop", "tags": "Theme", "date": "2022-04-20 00:00:00 +0800", "snippet": " Androidä¸­çš„é¢œè‰²å€¼é€šå¸¸éµå¾ªRGB/ARGBæ ‡å‡†ï¼Œä½¿ç”¨æ—¶é€šå¸¸ä»¥â€œ # â€å­—ç¬¦å¼€å¤´çš„8ä½16è¿›åˆ¶è¡¨ç¤ºã€‚å…¶ä¸­ARGB ä¾æ¬¡ä»£è¡¨é€æ˜åº¦ï¼ˆAlphaï¼‰ã€çº¢è‰²(Red)ã€ç»¿è‰²(Green)ã€è“è‰²(Blue)ï¼Œå–å€¼èŒƒå›´ä¸º0 ~ 255ï¼ˆå³16è¿›åˆ¶çš„0x00 ~ 0xffï¼‰ã€‚ ä½œè€…ï¼šç¿»è¯‘ä¸äº†çš„å£°å“é“¾æ¥ï¼šhttps://www.jianshu.com/p/3c1fe10aed4fæ¥æºï¼šç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚é€æ˜åº¦å‚è€ƒè¡¨ é€æ˜åº¦ å–å€¼ 100% 00 95% 0D 90% 1A 85% 26 80% 33 75% 40 70% 4D 65% 59 60% 66 55% 73 50% 80 45% 8C 40% 99 35% A6 30% B3 25% BF 20% CC 15% D9 10% E6 5% F2 0% FF " }, { "title": "Android MVPæ¶æ„", "url": "/posts/Android_MVP/", "categories": "Android, Architecture", "tags": "Develop", "date": "2022-04-19 00:00:00 +0800", "snippet": "ä»€ä¹ˆæ˜¯MVPï¼ŸMVPçš„å…¨ç§°ä¸ºModel-View-Presenterï¼ŒModelæä¾›æ•°æ®ï¼ŒViewè´Ÿè´£æ˜¾ç¤ºï¼ŒController/Presenterè´Ÿè´£é€»è¾‘çš„å¤„ç†ã€‚æ¥è‡ªç»´åŸºç™¾ç§‘çš„æ¨¡å‹æè¿° Model-View-Presenter (MVP) æ˜¯ç”¨æˆ·ç•Œé¢è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œè¢«å¹¿æ³›ç”¨äºä¾¿æ·è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•å’Œåœ¨å‘ˆç°é€»è¾‘ä¸­æ”¹è‰¯åˆ†ç¦»å…³æ³¨ç‚¹ï¼ˆseparation of concernsï¼‰ã€‚ Model å®šä¹‰ç”¨æˆ·ç•Œé¢æ‰€éœ€è¦è¢«æ˜¾ç¤ºçš„èµ„æ–™æ¨¡å‹ï¼Œä¸€ä¸ªæ¨¡å‹åŒ…å«ç€ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ã€‚ View è§†å›¾ä¸ºå‘ˆç°ç”¨æˆ·ç•Œé¢çš„ç»ˆç«¯ï¼Œç”¨ä»¥è¡¨ç°æ¥è‡ª Model çš„èµ„æ–™ï¼Œå’Œç”¨æˆ·å‘½ä»¤è·¯ç”±å†ç»è¿‡ Presenter å¯¹äº‹ä»¶å¤„ç†åçš„èµ„æ–™ã€‚ Presenter åŒ…å«ç€ç»„ä»¶çš„äº‹ä»¶å¤„ç†ï¼Œè´Ÿè´£æ£€ç´¢ Model è·å–èµ„æ–™ï¼Œå’Œå°†è·å–çš„èµ„æ–™ç»è¿‡æ ¼å¼è½¬æ¢ä¸ View è¿›è¡Œæ²Ÿé€šã€‚ Android å®ç°ä»£ç å‚è€ƒè°·æ­Œå®˜æ–¹çš„Demoã€‚To-DoAppçš„todo-mvp-kotlinåˆ†æ”¯1. å®šä¹‰BaseViewå’ŒBasePresenter å…¶ä¸­BaseViewæŒæœ‰ä¸€ä¸ªpresenteræˆå‘˜ã€‚å®ç°BasePresenterè¦å®ç°start()æ–¹æ³•ã€‚interface BaseView&amp;lt;T&amp;gt; { var presenter: T}interface BasePresenter { fun start()}2.æ˜ç¡®åŠŸèƒ½éœ€æ±‚ï¼Œç¼–å†™åŠŸèƒ½çº§çš„Viewå’ŒPresenterä»¥Taskè¯¦æƒ…é¡µä¸ºä¾‹ï¼Œç”¨æˆ·èƒ½æ‰§è¡Œ4ç§æ“ä½œï¼Œåˆ†åˆ«æ˜¯ç¼–è¾‘Taskã€åˆ é™¤Taskã€æ”¹å˜Taskå®ŒæˆçŠ¶æ€ï¼ˆå·²å®Œæˆã€æœªå®Œæˆï¼‰ã€‚æ ¹æ®ä¸Šé¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬Taskè¯¦æƒ…é¡µçš„Presenterä»£ç å¦‚ä¸‹ã€‚interface Presenter : BasePresenter { // ç¼–è¾‘Task fun editTask() // åˆ é™¤Task fun deleteTask() // å®ŒæˆTask fun completeTask() // æ¿€æ´»Task fun activateTask()}interface View : BaseView&amp;lt;Presenter&amp;gt; { val isActive: Boolean // æ˜¯å¦æ˜¾ç¤ºåŠ è½½ä¸­ fun setLoadingIndicator(active: Boolean) // æ˜¾ç¤ºæ‰¾ä¸åˆ°Task fun showMissingTask() // Taskä¸ºç©ºæ—¶ï¼Œéšè—æ ‡é¢˜ fun hideTitle() // æ˜¾ç¤ºå¹¶æ˜¾ç¤ºæ ‡é¢˜ fun showTitle(title: String) // Taskä¸ºç©ºæ—¶ï¼Œéšè—æè¿° fun hideDescription() // æ˜¾ç¤ºå¹¶æ˜¾ç¤ºæè¿° fun showDescription(description: String) // æ˜¾ç¤ºTaskçš„å®ŒæˆçŠ¶æ€ fun showCompletionStatus(complete: Boolean) // è·³è½¬ç¼–è¾‘Taskçš„Activity fun showEditTask(taskId: String) // æ‰§è¡ŒTaskåˆ é™¤åçš„é€»è¾‘ fun showTaskDeleted() // æ˜¾ç¤ºTaskå·²å®Œæˆçš„ç•Œé¢ fun showTaskMarkedComplete() // æ˜¾ç¤ºTaskå·²å·²æ¿€æ´»çš„ç•Œé¢ fun showTaskMarkedActive()}3.ä¸šåŠ¡ä»£ç åˆ†æ TaskDetailActivityæ˜¯å®¹å™¨ï¼Œå…·ä½“å®ç°é€»è¾‘åœ¨TaskDetailFragmentã€‚ åœ¨TaskDetailActivityé‡Œï¼Œå°†TaskDetailPresenterå’ŒTaskDetailFragmentï¼ˆå·²å®ç°Viewæ¥å£ï¼‰ ç»‘å®šåœ¨ä¸€èµ·ï¼Œå¦‚ä½•ç»‘å®šè§ä¸‹æ–‡2ã€‚ override fun onCreate(savedInstanceState: Bundle?) { ... //å–å¾—TaskDetailFragmentå®ä¾‹ val taskDetailFragment = ... TaskDetailPresenter(..., taskDetailFragment) ... } TaskDetailPresenteræ¥æ”¶å®ç°äº†Viewæ¥å£çš„UIï¼Œå³TaskDetailFragmentï¼Œå¹¶å®ç°Presenteræ¥å£ï¼Œåœ¨æ„é€ æ–¹æ³•çš„æ—¶å€™é€šè¿‡è°ƒç”¨ taskDetailView.presenter = this ç»‘å®šåœ¨ä¸€èµ·ã€‚ class TaskDetailPresenter( ... private val taskDetailView: TaskDetailContract.View ) : TaskDetailContract.Presenter { init { taskDetailView.presenter = this } ... //å®ç°TaskDetailContract.Presenterçš„æ–¹æ³• ... } TaskDetailFragmentå®ç°Viewæ¥å£ï¼Œå¹¶æŒæœ‰presenterå®ä¾‹å’ŒPresenterè¿›è¡Œäº¤äº’ã€‚åœ¨onResumeçš„æ—¶å€™ï¼Œè°ƒç”¨Presenterçš„start()æ–¹æ³•å¯åŠ¨Presenterï¼Œå¼€å§‹äº¤äº’ã€‚ class TaskDetailFragment : Fragment(), TaskDetailContract.View { override lateinit var presenter: TaskDetailContract.Presenter override fun onResume() { super.onResume() presenter.start() } ... //å®ç°TaskDetailContract.Viewçš„æ–¹æ³•å’Œå±æ€§ ... } TaskDetailFragmentè°ƒç”¨TaskDetailPresenterçš„æ–¹æ³•æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ŒTaskDetailPresenterè°ƒç”¨TaskDetailContract.Viewçš„æ–¹æ³•ï¼Œè®©TaskDetailFragmentæ›´æ–°é¡µé¢UIã€‚ è°ƒç”¨presenter.deleteTask()åˆ é™¤Task override fun onOptionsItemSelected(item: MenuItem): Boolean { val deletePressed = item.itemId == R.id.menu_delete if (deletePressed) presenter.deleteTask() return deletePressed } presenteræ ¹æ®å®é™…æƒ…å†µè°ƒç”¨Viewçš„æ–¹æ³•æ›´æ–°UIã€‚å¦‚æœtaskIdä¸ºç©ºï¼Œåˆ™è°ƒç”¨showMissingTask()æ˜¾ç¤ºæ²¡æœ‰Taskï¼Œå¦åˆ™æ‰§è¡Œåˆ é™¤é€»è¾‘å¹¶è°ƒç”¨showTaskDeleted()æ˜¾ç¤ºåˆ é™¤æˆåŠŸã€‚ override fun deleteTask() { if (taskId.isEmpty()) { taskDetailView.showMissingTask() return } tasksRepository.deleteTask(taskId) taskDetailView.showTaskDeleted() } TaskDetailFragmentæ‰§è¡Œæœ€ç»ˆæ˜¾ç¤ºUIçš„æ–¹æ³•ã€‚ override fun showMissingTask() { detailTitle.text = &quot;&quot; detailDescription.text = getString(R.string.no_data) } override fun showTaskDeleted() { activity?.finish() } " }, { "title": "AndroidåŠ¨ç”»ä¹‹è§†å›¾åŠ¨ç”»", "url": "/posts/Android_Basic_Animation/", "categories": "Android, Animation", "tags": "Animation", "date": "2022-04-19 00:00:00 +0800", "snippet": "Android View åŠ¨ç”»æ¡†æ¶ Animationæ¡†æ¶å®šä¹‰äº†é€æ˜åº¦ã€æ—‹è½¬ã€ç¼©æ”¾å’Œä½ç§»å‡ ç§å¸¸è§çš„åŠ¨é¢ï¼Œè€Œä¸”æ§åˆ¶çš„æ˜¯æ•´ä¸ªviewï¼Œå®ç°åŸç†æ˜¯æ¯æ¬¡ç»˜åˆ¶è§†å›¾æ—¶ View æ‰€åœ¨çš„ ViewGroup ä¸­çš„drawChild å‡½æ•°è·å–è¯¥ View çš„Animation çš„ Transformation å€¼ï¼Œç„¶åè°ƒç”¨ canvas.concat(transformToApply.getMatrix())ï¼Œé€šè¿‡çŸ©é˜µè¿ç®—å®ŒæˆåŠ¨ç”»å¸§ã€‚å¦‚æœåŠ¨ç”»æ²¡æœ‰å®Œæˆï¼Œå°±ç»§ç»­è°ƒç”¨ invalidate()å‡½æ•°ï¼Œå¯åŠ¨ä¸‹æ¬¡ç»˜åˆ¶ä¾†é©±åŠ¨åŠ¨ç”»ï¼Œä»è€Œå®Œæˆæ•´ä¸ªåŠ¨ç”»çš„ç»˜åˆ¶ã€‚â€”â€”ã€ŠAndroidç¾¤è‹±ä¼ ã€‹è§†å›¾åŠ¨ç”»å››ç§åŠ¨ç”»æ–¹å¼AlphaAnimationï¼ˆé€æ˜åº¦åŠ¨ç”»ï¼‰ ä¸ºè§†å›¾æ·»åŠ é€æ˜åº¦çš„å˜æ¢åŠ¨ç”»ã€‚ æ„å»ºAlphaAnimation2ä¸ªå‚æ•° fromAlpha å¼€å§‹çš„é€æ˜åº¦ toAlpha ç»“æŸçš„é€æ˜åº¦ //é€æ˜åº¦ä»0åˆ°1ï¼Œæ—¶é•¿1ç§’private fun alphaAnimation(v: View) { with(AlphaAnimation(0F, 1F)) { duration = 1000 v.startAnimation(this) }}RotateAnimationï¼ˆæ—‹è½¬åŠ¨ç”»ï¼‰ ä¸ºè§†å›¾å¢åŠ æ—‹è½¬çš„å˜æ¢åŠ¨ç”»ã€‚ æ„å»ºRotateAnimation6ä¸ªå‚æ•° fromDegrees æ—‹è½¬å¼€å§‹çš„è§’åº¦ toDegrees æ—‹è½¬ç»“æŸçš„è§’åº¦ pivotXType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT Xå€¼å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ pivotXValueï¼ˆé»˜è®¤ä¸º0ï¼‰ Xçš„å–å€¼ï¼ˆå¦‚æœpivotXTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ pivotYType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT Yå€¼å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ pivotYValueï¼ˆé»˜è®¤ä¸º0ï¼‰Yçš„å–å€¼ï¼ˆå¦‚æœpivotYValueä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ //ä»¥Viewçš„ï¼ˆ0ï¼Œ0ï¼‰ç‚¹ä¸ºä¸­å¿ƒï¼ˆå³å·¦ä¸Šè§’ï¼‰ï¼Œä»0åº¦æ—‹è½¬åˆ°360åº¦ï¼Œæ—¶é•¿1ç§’ã€‚private fun rotateAnimation(v: View) { with(RotateAnimation(0F, 360F, 0F, 0F)) { duration = 1000 v.startAnimation(this) }}//ä»¥Viewçš„å®½é«˜ä¸€åŠçš„ç‚¹ä¸ºä¸­å¿ƒï¼ˆå³Viewæ­£ä¸­å¿ƒï¼‰ï¼Œä»0åº¦æ—‹è½¬åˆ°360åº¦ï¼Œæ—¶é•¿1ç§’ã€‚private fun rotateSelfAnimation(v: View) { with( RotateAnimation( 0F, 360F, RotateAnimation.RELATIVE_TO_SELF, 0.5F, RotateAnimation.RELATIVE_TO_SELF, 0.5F ) ) { duration = 1000 v.startAnimation(this) }}TranslateAnimationï¼ˆä½ç§»åŠ¨ç”»ï¼‰ ä¸ºè§†å›¾ç§»åŠ¨æ—¶å¢åŠ ä½ç§»åŠ¨ç”»ã€‚ æ„å»ºTranslateAnimationçš„8ä¸ªå‚æ•° fromXType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT ç§»åŠ¨å‰Xçš„å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯” fromXValue ç§»åŠ¨å‰çš„Xä½ç½®ï¼ˆå¦‚æœfromXTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ toXType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT ç§»åŠ¨åXçš„å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯” toXValue ç§»åŠ¨åçš„Xä½ç½®ï¼ˆå¦‚æœtoXTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ fromYType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT ç§»åŠ¨å‰Yçš„å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ fromYValue ç§»åŠ¨å‰çš„Yä½ç½®ï¼ˆå¦‚æœfromYTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ toYType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT ç§»åŠ¨åYçš„å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ toYValue ç§»åŠ¨åçš„Yä½ç½®ï¼ˆå¦‚æœtoYTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ //ä»¥Viewï¼ˆ0ï¼Œ0ï¼‰ç‚¹å³å·¦ä¸Šè§’ç§»åˆ°ï¼ˆ200ï¼Œ300ï¼‰çš„ä½ç½®ï¼Œæ—¶é•¿1ç§’private fun translateAnimation(v: View) { with(TranslateAnimation(0F, 200F, 0F, 300F)) { duration = 1000 v.startAnimation(this) }}ScaleAnimationï¼ˆç¼©æ”¾åŠ¨ç”»ï¼‰ ä¸ºè§†å›¾çš„ç¼©æ”¾å¢åŠ åŠ¨ç”»æ•ˆæœã€‚ æ„å»ºScaleAnimationçš„8ä¸ªå‚æ•° fromX æ°´å¹³æ–¹å‘åˆå§‹ç¼©æ”¾æ¯”ä¾‹ toX æ°´å¹³æ–¹å‘ç»“æŸç¼©æ”¾æ¯”ä¾‹ fromY å‚ç›´æ–¹å‘åˆå§‹ç¼©æ”¾æ¯”ä¾‹ toY å‚ç›´æ–¹å‘ç»“æŸç¼©æ”¾æ¯”ä¾‹ pivotXType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT Xå€¼å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ pivotXValueï¼ˆé»˜è®¤ä¸º0ï¼‰ åŠ¨ç”»ç¼©æ”¾åˆå§‹ç‚¹çš„Xå€¼ï¼ˆå¦‚æœpivotXTypeä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ pivotYType ABSOLUTEï¼ˆé»˜è®¤å€¼ï¼‰ã€Animation.RELATIVE_TO_SELFã€Animation.RELATIVE_TO_PARENT Yå€¼å–å€¼æ˜¯Viewçš„ç»å¯¹å€¼ï¼Œè¿˜æ˜¯ä»¥Viewæˆ–ViewåŒäº²çš„å®½é«˜ç™¾åˆ†æ¯”ã€‚ pivotYValueï¼ˆé»˜è®¤ä¸º0ï¼‰ åŠ¨ç”»ç¼©æ”¾åˆå§‹ç‚¹çš„Yå€¼ï¼ˆå¦‚æœpivotYValueä¸æ˜¯ABSOLUTEï¼Œåˆ™å–å€¼èŒƒå›´æ˜¯0F~1Få³ç™¾åˆ†æ¯”ï¼‰ //ä»¥Viewï¼ˆ0ï¼Œ0ï¼‰ç‚¹å³å·¦ä¸Šè§’ä»å®½é«˜ä¸º0ç¼©æ”¾åˆ°åŸå®½é«˜çš„2å€ï¼Œæ—¶é•¿1ç§’private fun scaleAnimation(v: View) { with(ScaleAnimation(0F, 2F, 0F, 2F)) { duration = 1000 v.startAnimation(this) }}//ä»¥Viewçš„å®½é«˜ä¸€åŠçš„ç‚¹ä¸ºä¸­å¿ƒï¼ˆå³Viewæ­£ä¸­å¿ƒï¼‰ä»å®½é«˜ä¸º0ç¼©æ”¾åˆ°åŸå®½é«˜çš„1å€ï¼Œæ—¶é•¿1ç§’private fun scaleSelfAnimation(v: View) { with( ScaleAnimation( 0F, 1F, 0F, 1F, Animation.RELATIVE_TO_SELF, 0.5F, Animation.RELATIVE_TO_SELF, 0.5F ) ) { duration = 1000 v.startAnimation(this) }}AnimationSetï¼ˆåŠ¨ç”»é›†åˆï¼‰ é€šè¿‡AnimationSetå¯ä»¥å°†åŠ¨ç”»ä»¥ç»„åˆçš„å½¢å¼å±•ç°å‡ºæ¥ æ„é€ AnimationSetçš„1ä¸ªå‚æ•° shareInterpolator æ˜¯å¦é›†åˆå†…çš„åŠ¨ç”»å’ŒAnimationSetå…¬ç”¨ä¸€ä¸ªæ’å€¼å™¨ï¼Œå¦åˆ™æ¯ä¸ªåŠ¨ç”»å„ç”¨å›è‡ªå·±çš„æ’å€¼å™¨ã€‚ private fun animationSet(v: View) { val animationSet = AnimationSet(true).apply { duration = 1000 } val alpha = AlphaAnimation(0F, 1F).apply { duration = 1000 } animationSet.addAnimation(alpha) val translate = TranslateAnimation(0F, 100F, 0F, 200F).apply { duration = 1000 } animationSet.addAnimation(translate) v.startAnimation(animationSet)}ä»£ç ä»£ç å‚è€ƒ" }, { "title": "Androidåºåˆ—åŒ–ä¹‹Parcelable", "url": "/posts/Parcelable/", "categories": "Android, Serializable", "tags": "Develop", "date": "2022-03-16 00:00:00 +0800", "snippet": "1ã€ä»€ä¹ˆæ˜¯Parcel Container for a message (data and object references) that can be sent through an IBinder. A Parcel can contain both flattened data that will be unflattened on the other side of the IPC (using the various methods here for writing specific types, or the general Parcelable interface), and references to live IBinder objects that will result in the other side receiving a proxy IBinder connected with the original IBinder in the Parcel. Parcel ä¸€ä¸ªåœ¨IBinderä¸­ä¼ è¾“çš„æ¶ˆæ¯å®¹å™¨ã€‚ è¿›ç¨‹é—´é€šä¿¡ï¼Œå‘é€ç«¯æ‰“åŒ…æ•°æ®ï¼Œæ¥æ”¶ç«¯è§£åŒ…æ•°æ®ï¼Œå®ç°æ•°æ®ä¼ è¾“ã€‚ Parcel ä¸æ˜¯é€šç”¨åºåˆ—åŒ–æœºåˆ¶ï¼Œæ‚¨ç»ä¸èƒ½å°†ä»»ä½• Parcel æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šæˆ–é€šè¿‡ç½‘ç»œå‘é€ã€‚2ã€Parcelæ”¯æŒçš„ç±»å‹ Byte, ByteArray Double, DoubleArray Float, FloatArray Int, IntArray Long, LongArray String, StringArray â€¦3ã€å®ç°Parcelable(æ‰‹åŠ¨å®ç°Parcelableæ¥å£)import android.os.Parcelimport android.os.Parcelabledata class Pet( val name: String) : Parcelable { constructor(parcel: Parcel) : this(parcel.readString() ?: &quot;pet&quot;) override fun writeToParcel(parcel: Parcel, flags: Int) { parcel.writeString(name) } override fun describeContents(): Int { return 0 } companion object CREATOR : Parcelable.Creator&amp;lt;Pet&amp;gt; { override fun createFromParcel(parcel: Parcel): Pet { return Pet(parcel) } override fun newArray(size: Int): Array&amp;lt;Pet?&amp;gt; { return arrayOfNulls(size) } }}data class Person( val id: Long, var name: String, var age: Int, var isStudent: Boolean, var pets: List&amp;lt;Pet&amp;gt;) : Parcelable { constructor(parcel: Parcel) : this( parcel.readLong(), parcel.readString() ?: &quot;&quot;, parcel.readInt(), parcel.readByte() != 0.toByte(), parcel.createTypedArrayList(Pet) ?: emptyList() ) override fun writeToParcel(parcel: Parcel, flags: Int) { parcel.writeLong(id) parcel.writeString(name) parcel.writeInt(age) parcel.writeByte(if (isStudent) 1 else 0) parcel.writeTypedList(pets) } override fun describeContents(): Int { return 0 } companion object CREATOR : Parcelable.Creator&amp;lt;Person&amp;gt; { override fun createFromParcel(parcel: Parcel): Person { return Person(parcel) } override fun newArray(size: Int): Array&amp;lt;Person?&amp;gt; { return arrayOfNulls(size) } }}4ã€å®ç°Parcelableï¼ˆé€šè¿‡ Parcelable å®ç°ç”Ÿæˆå™¨ å®ç°ï¼‰Parcelable å®ç°ç”Ÿæˆå™¨ æ·»åŠ  kotlin-parcelize æ’ä»¶ã€‚ plugins { id &#39;kotlin-parcelize&#39;} apply plugin: &quot;kotlin-parcelize&quot; ç¼–å†™æ•°æ®ç±» @Parcelizedata class Person( val id: Long, var name: String, var age: Int, var isStudent: Boolean, var pets: List&amp;lt;Pet&amp;gt;) : Parcelable @Parcelize æ”¯æŒçš„ç±»å‹ åŸºå…ƒç±»å‹ï¼ˆåŠå…¶ boxed ç‰ˆæœ¬ï¼‰ å¯¹è±¡å’Œæšä¸¾ Stringã€CharSequence Exception Sizeã€SizeFã€Bundleã€IBinderã€IInterfaceã€FileDescriptor SparseArrayã€SparseIntArrayã€SparseLongArrayã€SparseBooleanArray æ‰€æœ‰ Serializableï¼ˆåŒ…æ‹¬ Dateï¼‰å’Œ Parcelable å®ç° æ‰€æœ‰å—æ”¯æŒç±»å‹çš„é›†åˆï¼š Listï¼ˆæ˜ å°„åˆ° ArrayListï¼‰ã€Setï¼ˆæ˜ å°„åˆ° LinkedHashSetï¼‰ã€Mapï¼ˆæ˜ å°„åˆ° LinkedHashMapï¼‰ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…·ä½“å®ç°ï¼šArrayListã€LinkedListã€SortedSetã€NavigableSetã€HashSetã€LinkedHashSetã€TreeSetã€SortedMapã€NavigableMapã€HashMapã€LinkedHashMapã€TreeMapã€ConcurrentHashMap æ‰€æœ‰å—æ”¯æŒç±»å‹çš„æ•°ç»„ æ‰€æœ‰å—æ”¯æŒç±»å‹çš„å¯ä¸º null ç‰ˆæœ¬ è‡ªå®šä¹‰Parcelerdata class Phone( val model: String)object PhoneClassParceler : Parceler&amp;lt;Phone&amp;gt; { override fun create(parcel: Parcel): Phone { return Phone(parcel.readString() ?: &quot;iPhone&quot;) } override fun Phone.write(parcel: Parcel, flags: Int) { parcel.writeString(model) }}@Parcelize@TypeParceler&amp;lt;Phone, PhoneClassParceler&amp;gt;()data class PhoneOwner(val phone: Phone) : Parcelable@Parcelizedata class PhoneOwner1(@TypeParceler&amp;lt;Phone, PhoneClassParceler&amp;gt;() val phone: Phone) : Parcelable@Parcelizedata class PhoneOwner2(val phone: @WriteWith&amp;lt;PhoneClassParceler&amp;gt;() Phone) : Parcelable" }, { "title": "AndroidåŠ¨ç”»ä¹‹å¸§åŠ¨ç”»", "url": "/posts/Android_Frame_Animation/", "categories": "Android, Animation", "tags": "Animation", "date": "2022-03-15 00:00:00 +0800", "snippet": "å¸§åŠ¨ç”»æ˜¯ä»€ä¹ˆé¦–å…ˆåŠ¨ç”»æœ¬è´¨å°±æ˜¯è¿æˆè¿è´¯åŠ¨ä½œçš„ä¸€å¸§å¸§é™æ€å›¾å¿«é€Ÿåˆ‡æ¢çš„æ•ˆæœã€‚å¸§ï¼šå°±æ˜¯å½±åƒåŠ¨ç”»ä¸­æœ€å°å•ä½çš„å•å¹…å½±åƒç”»é¢ï¼Œç›¸å½“äºç”µå½±èƒ¶ç‰‡ä¸Šçš„æ¯ä¸€æ ¼é•œå¤´ã€‚ä¸€å¸§å°±æ˜¯ä¸€å‰¯é™æ­¢çš„ç”»é¢ï¼Œè¿ç»­çš„å¸§å°±å½¢æˆåŠ¨ç”»ï¼Œå¦‚ç”µè§†å›¾è±¡ç­‰ã€‚åœ¨Androidå®ç°å¸§åŠ¨ç”»1ã€å‡†å¤‡ç´ æå°†å›¾ç‰‡èµ„æºæ”¾åœ¨drawableæ–‡ä»¶å¤¹ã€‚å¦‚å›¾æ‰€ç¤ºğŸ‘‡2ã€ç¼–å†™åŠ¨ç”»èµ„æºæ–‡ä»¶åœ¨drawableæ–‡ä»¶å¤¹ä¸‹æ–°å»ºframe_anim.xmlæ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&amp;lt;animation-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:oneshot=&quot;false&quot;&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation1&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation2&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation3&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation4&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation5&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation6&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation7&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation8&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation9&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation10&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation11&quot; android:duration=&quot;200&quot; /&amp;gt; &amp;lt;item android:drawable=&quot;@drawable/animation12&quot; android:duration=&quot;200&quot; /&amp;gt;&amp;lt;/animation-list&amp;gt;3ã€æ·»åŠ æ˜¾ç¤ºå¸§åŠ¨ç”»çš„ImageView&amp;lt;ImageView android:id=&quot;@+id/img_frame&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; tools:src=&quot;@mipmap/ic_launcher&quot; /&amp;gt;4ã€ç¼–å†™å®ç°å¸§åŠ¨ç”»çš„ä»£ç findViewById&amp;lt;ImageView&amp;gt;(R.id.img_frame).apply { setBackgroundResource(R.drawable.frame_anim) frameAnimation = background as AnimationDrawable tvOneShot.text = &quot;OneShot:${frameAnimation.isOneShot}&quot;}//å¼€å§‹åŠ¨ç”»findViewById&amp;lt;Button&amp;gt;(R.id.btn_start).setOnClickListener { frameAnimation.start()}5ã€æ•ˆæœ no_one_shot one_shot 6ã€ä»£ç ä»£ç å‚è€ƒ" } ]
